<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>P4 on 何律师</title><link>https://hebohang.github.io/tags/p4/</link><description>Recent content in P4 on 何律师</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>hebohang</copyright><lastBuildDate>Tue, 21 Nov 2023 16:03:52 +0800</lastBuildDate><atom:link href="https://hebohang.github.io/tags/p4/index.xml" rel="self" type="application/rss+xml"/><item><title>Perforce</title><link>https://hebohang.github.io/p/perforce/</link><pubDate>Tue, 21 Nov 2023 16:03:52 +0800</pubDate><guid>https://hebohang.github.io/p/perforce/</guid><description>&lt;p>UE 官方主推 P4，在二进制文件上他有加锁的机制，还算能用，但是很贵。&lt;/p>
&lt;h2 id="安装">安装&lt;/h2>
&lt;p>下载地址：
&lt;a class="link" href="https://www.perforce.com/downloads/helix-visual-client-p4v" target="_blank" rel="noopener"
>https://www.perforce.com/downloads/helix-visual-client-p4v&lt;/a>&lt;/p>
&lt;p>P4最好默认安装在C盘，与后续的UGS使用设置有关。&lt;/p>
&lt;h2 id="p4v">P4V&lt;/h2>
&lt;p>我们的 Depot 和 Workspace 是一个一一对应关系，因此对哪个进行 Checkout 都是一样的。&lt;/p>
&lt;h3 id="1-reconcile-offline-work">1. Reconcile Offline Work&lt;/h3>
&lt;p>对于没有 Checkout 的文件，默认是锁住的，是一个只读状态。如果我们没有连接 P4 但是又更改为可写状态在其他地方进行了更改，此时就不会加入到 Pending 里面。
（我之前就犯了这个错误，vs连接p4失败了，于是漏了文件没传上去，导致项目构建失败）&lt;/p>
&lt;p>我们可以右键点击 Reconcile Offline Work 来检查一下有没有漏的文件：&lt;/p>
&lt;p>&lt;img src="https://hebohang.github.io/p/perforce/image-1.png"
width="479"
height="326"
srcset="https://hebohang.github.io/p/perforce/image-1_hud9ce1d9291b75e927a10afae2288713a_34656_480x0_resize_box_3.png 480w, https://hebohang.github.io/p/perforce/image-1_hud9ce1d9291b75e927a10afae2288713a_34656_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="146"
data-flex-basis="352px"
>&lt;/p>
&lt;p>这个指令也就是让 Change list 和本地的情况一致。&lt;/p>
&lt;h3 id="2-revert-unchanged-files">2. Revert Unchanged Files&lt;/h3>
&lt;p>第二个好用的指令是这个：&lt;/p>
&lt;p>&lt;img src="https://hebohang.github.io/p/perforce/image-2.png"
width="506"
height="159"
srcset="https://hebohang.github.io/p/perforce/image-2_huba647176080a3eb2b2e2f0a5054640c5_13450_480x0_resize_box_3.png 480w, https://hebohang.github.io/p/perforce/image-2_huba647176080a3eb2b2e2f0a5054640c5_13450_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="318"
data-flex-basis="763px"
>&lt;/p>
&lt;p>可以自动 Revert 掉没有更改但是被checkout的文件。&lt;/p>
&lt;h2 id="ide">IDE&lt;/h2>
&lt;h3 id="vs2022">VS2022&lt;/h3>
&lt;p>对于 VS2022，我们需要安装 P4VS 插件：
&lt;img src="https://hebohang.github.io/p/perforce/image-3.png"
width="437"
height="76"
srcset="https://hebohang.github.io/p/perforce/image-3_huc00e26f5ee987335853b4e982bcb3620_10028_480x0_resize_box_3.png 480w, https://hebohang.github.io/p/perforce/image-3_huc00e26f5ee987335853b4e982bcb3620_10028_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="P4VS"
class="gallery-image"
data-flex-grow="575"
data-flex-basis="1380px"
>&lt;/p>
&lt;p>此时就可以在Tools-&amp;gt;Options里进行设置：
&lt;img src="https://hebohang.github.io/p/perforce/image-4.png"
width="244"
height="272"
srcset="https://hebohang.github.io/p/perforce/image-4_hu496ae4c259e57bd20dc5bd20b90ef47c_15862_480x0_resize_box_3.png 480w, https://hebohang.github.io/p/perforce/image-4_hu496ae4c259e57bd20dc5bd20b90ef47c_15862_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="89"
data-flex-basis="215px"
>&lt;/p>
&lt;p>这里我认为很好用的一个设置是：&lt;/p>
&lt;p>&lt;img src="https://hebohang.github.io/p/perforce/image.png"
width="738"
height="486"
srcset="https://hebohang.github.io/p/perforce/image_hu28c11be75d821228a0c48b549839b5ea_39245_480x0_resize_box_3.png 480w, https://hebohang.github.io/p/perforce/image_hu28c11be75d821228a0c48b549839b5ea_39245_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="364px"
>&lt;/p>
&lt;p>那样对于可写的文件，在保存的时候就会自动 Checkout 上，这样就不用担心漏checkout的问题了。&lt;/p>
&lt;h3 id="rider">Rider&lt;/h3>
&lt;p>由于觉得 VS2022 对于写 UE 有不方便之处，我还是切到了 Rider，对于 Rider 官方就支持 Perforce，无需安装任何插件。&lt;/p>
&lt;p>我们只需要填好这两处即可：&lt;/p>
&lt;p>&lt;img src="https://hebohang.github.io/p/perforce/image-5.png"
width="981"
height="722"
srcset="https://hebohang.github.io/p/perforce/image-5_hu08f73a6325ffffa6abe8961ac7d9c6ed_160016_480x0_resize_box_3.png 480w, https://hebohang.github.io/p/perforce/image-5_hu08f73a6325ffffa6abe8961ac7d9c6ed_160016_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="326px"
>&lt;/p>
&lt;p>如果还没生效重启一下就可以了。&lt;/p></description></item></channel></rss>